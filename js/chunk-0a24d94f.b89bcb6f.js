(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a24d94f"],{"0257":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l={class:"table table-hover"},r=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"成立時間"),Object(c["h"])("th",null,"商品"),Object(c["h"])("th",null,"金額"),Object(c["h"])("th",null,"付款"),Object(c["h"])("th",null,"編輯")])],-1),n={class:"num"},s={class:"text-secondary fst-italic num"},o={class:"num"},d={key:0,class:"text-success"},i={key:1,class:"text-muted"},b=["onClick"],u=["onClick"];function O(e,t,a,O,h,j){var m=Object(c["I"])("OrderModal"),p=Object(c["I"])("DeleteModal"),f=Object(c["I"])("ToastList"),g=Object(c["I"])("Pagination"),v=Object(c["I"])("Loading");return Object(c["z"])(),Object(c["g"])("div",null,[Object(c["h"])("table",l,[r,Object(c["h"])("tbody",null,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(h.orders,(function(e){return Object(c["z"])(),Object(c["g"])("tr",{key:e.id,class:Object(c["s"])([e.is_done?"bg-light text-secondary text-decoration-line-through":""])},[Object(c["h"])("td",n,Object(c["L"])(j.getFormDate(e.create_at)),1),Object(c["h"])("td",null,[Object(c["h"])("ul",null,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(e.products,(function(e,t){return Object(c["z"])(),Object(c["g"])("li",{key:t},[Object(c["j"])(Object(c["L"])(e.product.title)+" ",1),Object(c["h"])("span",s,"x"+Object(c["L"])(e.qty),1)])})),128))])]),Object(c["h"])("td",o,Object(c["L"])(e.total.toLocaleString())+"元",1),Object(c["h"])("td",null,[e.is_paid?(Object(c["z"])(),Object(c["g"])("span",d,"已付款")):(Object(c["z"])(),Object(c["g"])("span",i,"未付款"))]),Object(c["h"])("td",null,[Object(c["h"])("button",{onClick:function(t){return j.openModal(e)},class:"btn btn-outline-success btn-sm m-1"}," 檢視 ",8,b),Object(c["h"])("button",{onClick:function(t){return j.openDelModal(e)},class:"btn btn-outline-danger btn-sm m-1"}," 刪除 ",8,u)])],2)})),128))])]),Object(c["k"])(m,{order:h.tempOrder,status:"編輯",onUpdateOrder:j.updateOrder,ref:"orderModal"},null,8,["order","onUpdateOrder"]),Object(c["k"])(p,{onDelete:j.deleteOrder,title:h.tempOrder.id,id:h.tempOrder.id,name:"訂單",ref:"delModal"},null,8,["onDelete","title","id"]),Object(c["k"])(f),Object(c["k"])(g,{onUpdatePage:j.getOrders,page:h.pagination},null,8,["onUpdatePage","page"]),Object(c["k"])(v,{active:h.isLoading},null,8,["active"])])}var h=a("5530"),j=(a("99af"),a("1799")),m=a("f287"),p=a("0bdd"),f=(a("b0c0"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),g={class:"modal-dialog modal-xl",role:"document"},v={class:"modal-content border-0"},k={class:"modal-header bg-dark text-white"},y={class:"modal-title",id:"exampleModalLabel"},w=Object(c["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body"},M={class:"row"},L={class:"col-12"},S={class:"num"},I={class:"num"},_={class:"num"},D={class:"col-12"},V={class:"form-check"},P={class:"form-check-label",for:"is_paid"},E=Object(c["h"])("span",null,"付款狀態：",-1),z={key:0,class:"text-success"},U={key:1,class:"text-danger"},q={class:"col-12"},C={class:"form-check"},J={class:"form-check-label",for:"is_done"},F=Object(c["h"])("span",null,"訂單狀態：",-1),N={key:0,class:"text-success"},$={key:1,class:"text-danger"},T=Object(c["h"])("hr",null,null,-1),X={class:"row"},A={class:"col-12"},G={class:"table table-hover"},Q=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,[Object(c["h"])("h5",null,"商品：")])])],-1),W={class:"text-secondary fst-italic num"},Y=Object(c["h"])("hr",null,null,-1),B={class:"row"},H={class:"col-12"},K={class:"user"},R=Object(c["h"])("h5",{class:"pb-2"},"訂單資料：",-1),Z={class:"form-check form-check-inline"},ee=Object(c["h"])("label",{class:"form-check-label",for:"edit"},"修改",-1),te={class:"form-check form-check-inline"},ae=Object(c["h"])("label",{class:"form-check-label",for:"reset"},"還原",-1),ce={class:"mb-3"},le=Object(c["h"])("label",{for:"email",class:"form-label"},"Email",-1),re={class:"mb-3"},ne=Object(c["h"])("label",{for:"name",class:"form-label"},"姓名",-1),se={class:"mb-3"},oe=Object(c["h"])("label",{for:"phone",class:"form-label"},"電話",-1),de={class:"mb-3"},ie=Object(c["h"])("label",{for:"address",class:"form-label"},"地址",-1),be={class:"mb-3"},ue=Object(c["h"])("label",{for:"payment",class:"form-label"},"付款方式",-1),Oe=Object(c["h"])("option",{disabled:"",value:""},"請選擇付款方式",-1),he=Object(c["h"])("option",{value:"ATM轉帳"},"ATM轉帳",-1),je=Object(c["h"])("option",{value:"信用卡"},"信用卡",-1),me=["onClick","disabled"],pe=Object(c["h"])("hr",null,null,-1),fe=Object(c["h"])("div",{class:"row"},[Object(c["h"])("div",{class:"col-12"},[Object(c["h"])("h5",{class:"pb-2"},"後台備註："),Object(c["h"])("textarea",{class:"form-control",placeholder:"後台備註",id:"sellerNote",style:{height:"100px"}})])],-1),ge={class:"modal-footer"},ve=Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),ke=["disabled"];function ye(e,t,a,l,r,n){var s=Object(c["I"])("Field"),o=Object(c["I"])("ErrorMessage"),d=Object(c["I"])("Form");return Object(c["z"])(),Object(c["g"])("div",null,[Object(c["h"])("div",f,[Object(c["h"])("div",g,[Object(c["h"])("div",v,[Object(c["h"])("div",k,[Object(c["h"])("h4",y,[Object(c["h"])("span",null,Object(c["L"])(a.status)+"訂單狀態",1)]),w]),Object(c["h"])("div",x,[Object(c["h"])("div",M,[Object(c["h"])("div",L,[Object(c["h"])("div",S," 訂單成立時間："+Object(c["L"])(n.getFormDate(r.tempOrder.create_at)),1),Object(c["h"])("div",I,"訂單編號："+Object(c["L"])(r.tempOrder.id),1),Object(c["h"])("div",_," 總金額："+Object(c["L"])(r.tempOrder.total.toLocaleString())+"元 ",1)]),Object(c["h"])("div",D,[Object(c["h"])("div",V,[Object(c["X"])(Object(c["h"])("input",{class:"form-check-input",type:"checkbox",id:"is_paid","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.tempOrder.is_paid=e})},null,512),[[c["P"],r.tempOrder.is_paid]]),Object(c["h"])("label",P,[E,r.tempOrder.is_paid?(Object(c["z"])(),Object(c["g"])("span",z,"已完成")):(Object(c["z"])(),Object(c["g"])("span",U,"未完成"))])])]),Object(c["h"])("div",q,[Object(c["h"])("div",C,[Object(c["X"])(Object(c["h"])("input",{class:"form-check-input",type:"checkbox",id:"is_done","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.tempOrder.is_done=e})},null,512),[[c["P"],r.tempOrder.is_done]]),Object(c["h"])("label",J,[F,r.tempOrder.is_done?(Object(c["z"])(),Object(c["g"])("span",N,"已完成")):(Object(c["z"])(),Object(c["g"])("span",$,"未完成"))])])])]),T,Object(c["h"])("div",X,[Object(c["h"])("div",A,[Object(c["h"])("table",G,[Q,Object(c["h"])("tbody",null,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(r.tempOrder.products,(function(e){return Object(c["z"])(),Object(c["g"])("tr",{key:e.id},[Object(c["h"])("td",null,[Object(c["j"])(Object(c["L"])(e.product.title)+" ",1),Object(c["h"])("span",W,"x"+Object(c["L"])(e.qty),1)])])})),128))])])])]),Y,Object(c["h"])("div",B,[Object(c["h"])("div",H,[Object(c["h"])("div",K,[R,Object(c["h"])("div",Z,[Object(c["X"])(Object(c["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.infoStatus=e}),class:"form-check-input",type:"radio",name:"infoStatus",id:"edit",value:"edit"},null,512),[[c["Q"],r.infoStatus]]),ee]),Object(c["h"])("div",te,[Object(c["X"])(Object(c["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.infoStatus=e}),class:"form-check-input",type:"radio",name:"infoStatus",id:"reset",value:"reset"},null,512),[[c["Q"],r.infoStatus]]),ae]),Object(c["k"])(d,null,{default:Object(c["W"])((function(e){var a=e.errors,l=e.validate;return[Object(c["h"])("div",ce,[le,Object(c["k"])(s,{id:"email",name:"email",type:"email",class:Object(c["s"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:r.tempOrder.user.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.tempOrder.user.email=e}),disabled:!r.allowEditInfo},null,8,["class","modelValue","disabled"]),Object(c["k"])(o,{name:"email",class:"invalid-feedback"})]),Object(c["h"])("div",re,[ne,Object(c["k"])(s,{id:"name",name:"姓名",type:"text",class:Object(c["s"])(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:r.tempOrder.user.name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.tempOrder.user.name=e}),disabled:!r.allowEditInfo},null,8,["class","modelValue","disabled"]),Object(c["k"])(o,{name:"姓名",class:"invalid-feedback"})]),Object(c["h"])("div",se,[oe,Object(c["k"])(s,{id:"tel",name:"電話",type:"text",class:Object(c["s"])(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:{regex:/(\d{2,3}-?|\(\d{2,3}\))\d{3,4}-?\d{4}|09\d{2}(\d{6}|-\d{3}-\d{3})/,required:!0},modelValue:r.tempOrder.user.tel,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.tempOrder.user.tel=e}),disabled:!r.allowEditInfo},null,8,["class","rules","modelValue","disabled"]),Object(c["k"])(o,{name:"電話",class:"invalid-feedback"})]),Object(c["h"])("div",de,[ie,Object(c["k"])(s,{id:"address",name:"地址",type:"text",class:Object(c["s"])(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:r.tempOrder.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.tempOrder.user.address=e}),disabled:!r.allowEditInfo},null,8,["class","modelValue","disabled"]),Object(c["k"])(o,{name:"地址",class:"invalid-feedback"})]),Object(c["h"])("div",be,[ue,Object(c["k"])(s,{id:"payment",name:"付款方式",class:Object(c["s"])(["form-control",{"is-invalid":a["付款方式"]}]),as:"select",rules:"required",modelValue:r.tempOrder.user.payment_method,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.tempOrder.user.payment_method=e}),disabled:!r.allowEditInfo},{default:Object(c["W"])((function(){return[Oe,he,je]})),_:2},1032,["class","modelValue","disabled"]),Object(c["k"])(o,{name:"付款方式",class:"invalid-feedback"})]),Object(c["h"])("button",{class:"btn btn-sm btn-success",type:"button",onClick:function(e){return l(),n.checkInfo(a)},disabled:!r.allowEditInfo}," 確認修改 ",8,me)]})),_:1})])])]),pe,fe]),Object(c["h"])("div",ge,[ve,Object(c["h"])("button",{onClick:t[9]||(t[9]=function(t){return e.$emit("updateOrder",r.tempOrder)}),type:"button",class:"btn btn-primary",disabled:r.allowEditInfo}," 確認 ",8,ke)])])])],512)])}a("b64b");var we=a("db44"),xe=a("62c7"),Me={name:"OrderModal",mixins:[we["a"]],props:{order:{type:Object,required:!0},status:{type:String,required:!0}},data:function(){return{tempOrder:{total:0,id:"",user:{name:"",email:"",tel:"",address:"",payment_method:""}},infoStatus:"",allowEditInfo:!1}},methods:{getFormDate:xe["a"],checkInfo:function(e){0===Object.keys(e).length&&(this.allowEditInfo=!1,this.infoStatus="")}},watch:{order:function(){this.tempOrder=JSON.parse(JSON.stringify(this.order)),this.tempOrder.total||(this.tempOrder.total=0),this.tempOrder.user||(this.tempOrder.user={name:"",email:"",tel:"",address:"",payment_method:""})},infoStatus:function(){"edit"===this.infoStatus?this.allowEditInfo=!0:"reset"===this.infoStatus&&(this.allowEditInfo=!1,this.tempOrder.user=JSON.parse(JSON.stringify(this.order.user)))}}};Me.render=ye;var Le=Me,Se={name:"Orders",components:{Pagination:j["a"],ToastList:m["a"],DeleteModal:p["a"],OrderModal:Le},inject:["resMsg"],data:function(){return{orders:[],tempOrder:{},pagination:{},isLoading:!1}},methods:{getFormDate:xe["a"],openModal:function(e){this.tempOrder=Object(h["a"])({},e),this.$refs.orderModal.showModal()},openDelModal:function(e){this.$refs.delModal.showModal(),this.tempOrder=JSON.parse(JSON.stringify(e))},getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("data-api","/admin/orders?page=").concat(t);this.isLoading=!0,this.axios.get(a).then((function(t){t.data.success&&(e.isLoading=!1,e.orders=t.data.orders,e.pagination=t.data.pagination)}))},updateOrder:function(e){var t=this;this.tempOrder=e,this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("data-api","/admin/order/").concat(e.id);this.axios.put(a,{data:this.tempOrder}).then((function(e){e.data.success&&(t.getOrders(),t.tempOrder={}),t.isLoading=!1,t.$refs.orderModal.hideModal(),t.resMsg(e)}))},deleteOrder:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("data-api","/admin/order/").concat(e);this.isLoading=!0,this.axios.delete(a).then((function(e){e.data.success&&(t.$refs.delModal.hideModal(),t.isLoading=!1,t.getOrders()),t.resMsg(e,"刪除")}))}},mounted:function(){this.getOrders()}};Se.render=O;t["default"]=Se},"4de4":function(e,t,a){"use strict";var c=a("23e7"),l=a("b727").filter,r=a("1dde"),n=r("filter");c({target:"Array",proto:!0,forced:!n},{filter:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("b64b"),a("a4d3"),a("4de4"),a("e439"),a("159b"),a("dbb4");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"62c7":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));a("99af");function c(e){var t=new Date(1e3*e),a=t.getFullYear(),c=t.getMonth()+1;c<=9&&(c="0"+c);var l=t.getDate();return l<=9&&(l="0"+l),"".concat(a,"-").concat(c,"-").concat(l)}function l(e){return Math.floor(new Date(e)/1e3)}},b64b:function(e,t,a){var c=a("23e7"),l=a("7b0b"),r=a("df75"),n=a("d039"),s=n((function(){r(1)}));c({target:"Object",stat:!0,forced:s},{keys:function(e){return r(l(e))}})},dbb4:function(e,t,a){var c=a("23e7"),l=a("83ab"),r=a("56ef"),n=a("fc6a"),s=a("06cf"),o=a("8418");c({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(e){var t,a,c=n(e),l=s.f,d=r(c),i={},b=0;while(d.length>b)a=l(c,t=d[b++]),void 0!==a&&o(i,t,a);return i}})},e439:function(e,t,a){var c=a("23e7"),l=a("d039"),r=a("fc6a"),n=a("06cf").f,s=a("83ab"),o=l((function(){n(1)})),d=!s||o;c({target:"Object",stat:!0,forced:d,sham:!s},{getOwnPropertyDescriptor:function(e,t){return n(r(e),t)}})}}]);
//# sourceMappingURL=chunk-0a24d94f.b89bcb6f.js.map