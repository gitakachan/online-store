(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-375eeedd"],{"0485":function(t,e,i){"use strict";e["a"]={watch:{imgRefs:{deep:!0,handler:function(){this.resetImgSize()}}},methods:{setImgRef:function(t){null!==t&&this.imgRefs.push(t)},resetImgSize:function(){for(var t=0;t<this.imgRefs.length;t++)null!==this.imgRefs[t]&&this.imgRefs[t].offsetHeight!==this.imgRefs[t].offsetWidth&&(this.imgRefs[t].style.height=this.imgRefs[t].offsetWidth+"px")}},mounted:function(){window.addEventListener("resize",this.resetImgSize)},beforeUpdate:function(){this.imgRefs=[]},destroyed:function(){window.removeEventListener("resize",this.resetImgSize)}}},"159b":function(t,e,i){var r=i("da84"),c=i("fdbc"),n=i("17c2"),s=i("9112");for(var a in c){var o=r[a],d=o&&o.prototype;if(d&&d.forEach!==n)try{s(d,"forEach",n)}catch(l){d.forEach=n}}},"17c2":function(t,e,i){"use strict";var r=i("b727").forEach,c=i("a640"),n=c("forEach");t.exports=n?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1a05":function(t,e,i){"use strict";var r=i("7a23"),c={class:"header py-4"},n={class:"position-relative m-4"},s=Object(r["h"])("div",{class:"progress",style:{height:"1px"}},[Object(r["h"])("div",{class:"progress-bar",role:"progressbar",style:{width:"100%"},"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})],-1),a={class:"position-absolute top-0 start-50 bg-white px-3 translate-middle text-nowrap"};function o(t,e,i,o,d,l){return Object(r["z"])(),Object(r["g"])("div",c,[Object(r["h"])("div",n,[s,Object(r["h"])("h1",a,Object(r["L"])(i.title),1)])])}var d={name:"Header",props:{title:{type:String,required:!0}}};d.render=o;e["a"]=d},"2a66":function(t,e,i){},a434:function(t,e,i){"use strict";var r=i("23e7"),c=i("23cb"),n=i("a691"),s=i("50c4"),a=i("7b0b"),o=i("65f0"),d=i("8418"),l=i("1dde"),u=l("splice"),f=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var i,r,l,u,p,m,j=a(this),O=s(j.length),v=c(t,O),k=arguments.length;if(0===k?i=r=0:1===k?(i=0,r=O-v):(i=k-2,r=h(f(n(e),0),O-v)),O+i-r>b)throw TypeError(g);for(l=o(j,r),u=0;u<r;u++)p=v+u,p in j&&d(l,u,j[p]);if(l.length=r,i<r){for(u=v;u<O-r;u++)p=u+r,m=u+i,p in j?j[m]=j[p]:delete j[m];for(u=O;u>O-r+i;u--)delete j[u-1]}else if(i>r)for(u=O-r;u>v;u--)p=u+r-1,m=u+i-1,p in j?j[m]=j[p]:delete j[m];for(u=0;u<i;u++)j[u+v]=arguments[u+2];return j.length=O-r+i,l}})},a640:function(t,e,i){"use strict";var r=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&r((function(){i.call(null,e||function(){throw 1},1)}))}},ac99:function(t,e,i){"use strict";i("99af");e["a"]={methods:{priceStyle:function(t,e){return'<span class="eng">NT$ '.concat(t.toLocaleString()," / </span>").concat(e)}}}},b727:function(t,e,i){var r=i("0366"),c=i("44ad"),n=i("7b0b"),s=i("50c4"),a=i("65f0"),o=[].push,d=function(t){var e=1==t,i=2==t,d=3==t,l=4==t,u=6==t,f=7==t,h=5==t||u;return function(b,g,p,m){for(var j,O,v=n(b),k=c(v),x=r(g,p,3),y=s(k.length),L=0,w=m||a,I=e?w(b,y):i||f?w(b,0):void 0;y>L;L++)if((h||L in k)&&(j=k[L],O=x(j,L,v),t))if(e)I[L]=O;else if(O)switch(t){case 3:return!0;case 5:return j;case 6:return L;case 2:o.call(I,j)}else switch(t){case 4:return!1;case 7:o.call(I,j)}return u?-1:d||l?l:I}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},c740:function(t,e,i){"use strict";var r=i("23e7"),c=i("b727").findIndex,n=i("44d2"),s="findIndex",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),n(s)},cd73:function(t,e,i){"use strict";i("2a66")},d730:function(t,e,i){"use strict";var r=i("7a23");Object(r["C"])("data-v-9b9682aa");var c={class:"row"},n={class:"card gray-box-shadow rounded-0 h-100"},s=["src","alt"],a={class:"card-body"},o={class:"mb-2"},d={class:"card-text"},l={class:"description mb-2"},u={class:"\n                price\n                d-flex\n                align-items-end\n                flex-md-column-reverse\n                align-items-md-start\n              "},f=["innerHTML"],h=["innerHTML"],b={class:"tag mb-3"},g={class:"badge bg-primary-d-200"},p={class:"label mt-2 d-flex align-items-center"},m={class:"badge bg-primary-d-400 me-2"},j={class:"badge bg-primary-d-600 me-2"},O=["onClick"],v={class:"card-footer p-0"},k={class:"fw-bold w-100"},x=Object(r["h"])("i",{class:"bi bi-eye"},null,-1),y=Object(r["j"])(" 看詳細行程 ");function L(t,e,i,L,w,I){var S=Object(r["I"])("router-link");return Object(r["z"])(),Object(r["g"])("div",c,[(Object(r["z"])(!0),Object(r["g"])(r["a"],null,Object(r["G"])(i.target,(function(e){return Object(r["z"])(),Object(r["g"])("div",{class:Object(r["s"])(["product mb-4",i.gridItemClass]),key:e.id},[Object(r["h"])("div",n,[Object(r["k"])(S,{class:"img-container position-relative",to:{path:"/store/products/"+"".concat(e.id)}},{default:Object(r["W"])((function(){return[Object(r["h"])("img",{src:e.imagesUrl[0],class:"align-bottom card-img-top rounded-0",alt:"產品圖片：".concat(e.title),ref:t.setImgRef},null,8,s)]})),_:2},1032,["to"]),Object(r["h"])("div",a,[Object(r["h"])("h3",o,Object(r["L"])(e.title),1),Object(r["h"])("div",d,[Object(r["h"])("div",l,Object(r["L"])(e.short_description),1),Object(r["h"])("div",u,[Object(r["h"])("div",{innerHTML:t.priceStyle(e.price,e.unit),class:"me-3 fs-4"},null,8,f),Object(r["h"])("div",{innerHTML:t.priceStyle(e.origin_price,e.unit),class:"text-decoration-line-through text-secondary"},null,8,h)]),Object(r["h"])("div",b,[Object(r["h"])("span",g,Object(r["L"])(e.tag),1)]),Object(r["h"])("div",p,[Object(r["h"])("span",m,Object(r["L"])(e.area),1),Object(r["h"])("span",j,Object(r["L"])(e.category),1),Object(r["h"])("a",{onClick:Object(r["Y"])((function(i){return t.addLiked(e.id)}),["prevent"]),class:"add-liked ms-auto me-2"},[Object(r["h"])("i",{class:Object(r["s"])([t.likedStatus(e.id),"bi bi-heart-fill text-white"])},null,2)],8,O)])])]),Object(r["h"])("div",v,[Object(r["h"])("div",k,[Object(r["k"])(S,{to:{path:"/store/products/".concat(e.id)},tag:"button",class:"btn btn-primary w-100 rounded-0"},{default:Object(r["W"])((function(){return[x,y]})),_:2},1032,["to"])])])])],2)})),128))])}Object(r["A"])();var w=i("0485"),I=i("ac99"),S=i("d831"),E={name:"ProductList",mixins:[w["a"],I["a"],S["a"]],props:{target:{type:Array,default:function(){return[]}},gridItemClass:{type:Array,default:function(){return[]}}},data:function(){return{imgRefs:[]}}};i("cd73");E.render=L,E.__scopeId="data-v-9b9682aa";e["a"]=E},d831:function(t,e,i){"use strict";i("c740"),i("a434");e["a"]={inject:["resMsg"],data:{likedStorage:JSON.parse(localStorage.getItem("likedProducts"))||[]},methods:{addLiked:function(t){var e=this.likedStorage.findIndex((function(e){return t===e}));this.likedStorage.indexOf(t)<0?(this.likedStorage.push(t),this.resMsg({data:{success:!0}},"收藏")):(this.likedStorage.splice(e,1),this.resMsg({data:{success:!0}},"取消收藏")),localStorage.setItem("likedProducts",JSON.stringify(this.likedStorage))}},computed:{likedStatus:function(){return function(t){return this.likedStorage.indexOf(t)>-1?"added":""}}}}},e740:function(t,e,i){"use strict";i.r(e);var r=i("7a23"),c={class:"container"},n={class:"pt-5 pb-8 text-center"},s=Object(r["h"])("h2",{class:"pb-4"},"目前尚無收藏的商品",-1),a=Object(r["h"])("i",{class:"bi bi-arrow-up-right"},null,-1),o=Object(r["j"])(" 回去逛逛");function d(t,e,i,d,l,u){var f=Object(r["I"])("CenteredHeader"),h=Object(r["I"])("ProductList"),b=Object(r["I"])("router-link"),g=Object(r["I"])("Loading"),p=Object(r["I"])("ToastList");return Object(r["z"])(),Object(r["g"])("div",c,[Object(r["k"])(f,{title:"收藏列表"}),Object(r["k"])(h,{target:u.likedList,gridItemClass:["col-12","col-md-4"]},null,8,["target"]),Object(r["X"])(Object(r["h"])("div",n,[s,Object(r["h"])("h3",null,[Object(r["k"])(b,{to:"/store/products",class:"text-info"},{default:Object(r["W"])((function(){return[a,o]})),_:1})])],512),[[r["T"],0===this.likedList.length]]),Object(r["k"])(g,{active:l.isLoading},null,8,["active"]),Object(r["k"])(p)])}i("159b"),i("99af");var l=i("f287"),u=i("d730"),f=i("1a05"),h=i("d831"),b={name:"Liked",mixins:[h["a"]],inject:["emitter"],components:{ToastList:l["a"],ProductList:u["a"],CenteredHeader:f["a"]},data:function(){return{isLoading:!1,products:[]}},computed:{likedList:function(){var t=this,e=[];return this.likedStorage.forEach((function(i){t.products.forEach((function(r,c){r.id===i&&e.push(t.products[c])}))})),e.reverse()}},methods:{getProducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("data-api","/products");this.isLoading=!0,this.axios.get(e).then((function(e){t.isLoading=!1,e.data.success&&(t.products=e.data.products,t.products.forEach((function(t){void 0===t.imagesUrl&&(t.imagesUrl=[])})))}))}},mounted:function(){this.getProducts()}};b.render=d;e["default"]=b}}]);
//# sourceMappingURL=chunk-375eeedd.c0683a05.js.map